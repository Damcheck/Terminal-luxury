import{L,A as C,N as w,i as P}from"./detect-scroll-direction-CMTv0ZBx.js";import{M as q,F as x}from"./marquee-DoEEElvA.js";import{S as k}from"./shared-animations-C6NHXnxh.js";var E;const D=((E=document.documentElement.getAttribute("data-current-language"))==null?void 0:E.toUpperCase())||"EN",v={ES:{ERROR_MESSAGES:{required:"Este campo es obligatorio",email:"Por favor ingresa un email válido",confirmEmail:"Los emails no coinciden",minLength:n=>`Mínimo ${n} caracteres requeridos`,maxLength:n=>`Máximo ${n} caracteres permitidos`,select:"Por favor selecciona una opción válida",phone:"Por favor ingresa un número de teléfono válido",postalCode:"Por favor ingresa un código postal válido",confirmPassword:"Los passwords no coinciden",atLeastOneOption_es:"Por favor selecciona al menos una opción"}},EN:{ERROR_MESSAGES:{required:"This field is required",email:"Please enter a valid email address",confirmEmail:"Emails do not match",minLength:n=>`Minimum ${n} characters required`,maxLength:n=>`Maximum ${n} characters allowed`,select:"Please select a valid option",phone:"Please enter a valid phone number",postalCode:"Please enter a valid postal code",confirmPassword:"Passwords do not match",atLeastOneOption:"Please select at least one option"}}},{ERROR_MESSAGES:c}=v[D]||v.EN;let p=null,b=[],g=[];function y(n){const e=n.querySelector("input, textarea, select");if(!e)return{isValid:!1,message:""};let a=!0,t="";const r=e.hasAttribute("required");if(e.type==="radio"){const o=e.name;return n.querySelector(`input[type="radio"][name="${o}"]:checked`)?{isValid:!0,message:""}:{isValid:!1,message:c.required}}if(e.type==="checkbox"&&!e.name.includes("[]"))return e.required&&!e.checked?{isValid:!1,message:e.getAttribute("data-custom-message")||c.required}:{isValid:!0,message:""};if(e.type==="checkbox"&&e.name.includes("[]")){const o=document.querySelectorAll(`input[type="checkbox"][name="${e.name}"]`);return Array.from(o).some(S=>S.checked)?{isValid:!0,message:""}:{isValid:!1,message:c.atLeastOneOption||"Please select at least one option"}}const s=e.value.trim(),i=s.length;if(r&&!s)return{isValid:!1,message:c.required};if(!r&&!s)return{isValid:!0,message:""};const l=e.getAttribute("data-pattern");if(l&&!new RegExp(l).test(s)){a=!1;const m=e.getAttribute("placeholder")||"";return t=(c.pattern||"Invalid format.")+(m?` (e.g. ${m})`:""),{isValid:a,message:t}}if(e.tagName.toLowerCase()==="select"&&(s===""||s==="disabled"||s==="null"||s==="false")&&(a=!1,t=c.select),e.type==="email"&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)||(a=!1,t=c.email),e.id==="confirm-email")){const m=document.getElementById("email");m&&s!==m.value.trim()&&(a=!1,t=c.confirmEmail)}if(e.type==="password"&&e.id==="confirm-password"){const o=document.getElementById("password");o&&s!==o.value.trim()&&(a=!1,t=c.confirmPassword)}e.type==="tel"&&((e.name==="cardNumber"||e.id==="cardNumber")&&(/^\d{13,16}$/.test(s.replace(/\s+/g,""))||(a=!1,t="Invalid card number format.")),(e.id==="securityCode"||e.name==="securityCode")&&(/^\d+$/.test(s)||(a=!1,t="Security code must contain only digits.")),(e.id==="phone"||e.name==="phone")&&(/^\+?[\d\s\-]{7,15}$/.test(s)||(a=!1,t=c.phone))),e.name==="postalCode"&&(/^[A-Za-z0-9\s\-]{3,10}$/.test(s)||(a=!1,t=c.postalCode));const u=parseInt(e.getAttribute("min"))||0,d=parseInt(e.getAttribute("max"))||1/0;return e.hasAttribute("min")&&i<u&&(a=!1,t=c.minLength(u)),e.hasAttribute("max")&&i>d&&(a=!1,t=c.maxLength(d)),{isValid:a,message:t}}function f(n,e){const a=n.querySelector("[data-error-message]"),t=a.querySelector(".error-message");if(t&&t.remove(),e){const r=document.createElement("span");r.className="error-message",r.textContent=e,a.appendChild(r)}}function M(){b.forEach(n=>{const e=n.querySelector("input, textarea, select");if(!e)return;if(e.type==="checkbox"&&e.name.endsWith("[]")){const r=document.querySelectorAll(`input[type="checkbox"][name="${e.name}"]`),s=()=>{const{isValid:i,message:l}=y(n);i?f(n,""):f(n,l)};r.forEach(i=>{i.addEventListener("change",()=>{i.dataset.touched="true",s()})});return}const a=()=>{const{isValid:r,message:s}=y(n);r?f(n,""):f(n,s)};e.addEventListener("focus",()=>{e.dataset.touched="true"}),e.tagName.toLowerCase()==="select"?e.addEventListener("change",()=>{e.dataset.touched="true",a()}):e.addEventListener("input",()=>{e.dataset.touched&&a()}),e.addEventListener("blur",()=>{e.dataset.touched="true",a()});const t=n.querySelector("#cardNumber");t==null||t.addEventListener("input",r=>{let s=r.target.value;s=s.replace(/\D/g,""),s=s.replace(/(.{4})/g,"$1 ").trim(),r.target.value=s})})}function N(){let n=!0;return b.forEach(e=>{const{isValid:a,message:t}=y(e);f(e,t),a||(n=!1)}),n}function V(){p.reset(),p.querySelectorAll("select").forEach(function(e){e.selectedIndex=0}),I()}function R(n){p=n,b=p.querySelectorAll("[data-validate]"),M()}function I(){g.forEach(n=>{n.destroy()}),g=[],A()}function O({selectId:n,options:e,placeholder:a}){const t=document.getElementById(n);if(!t)return;t.addEventListener("change",function(){const s=t.getAttribute("data-placeholder")||"",i=t.nextElementSibling||t.previousElementSibling,l=i==null?void 0:i.querySelector(".current"),u=[...t.options].find(d=>d.value===t.value);t.value!==s?l.classList.add("has-selection"):l.classList.remove("has-selection"),u&&l&&(l.textContent=u.textContent)}),e.sort().forEach(s=>{const i=document.createElement("option");i.value=s,i.textContent=s,t.appendChild(i)});const r=NiceSelect.bind(t,{searchable:!1,placeholder:a||t.getAttribute("data-placeholder")});g.push(r)}function A(){O({selectId:"city",options:["Lagos","Abuja","Port Harcourt","Kano","Ibadan","Kaduna","Benin City","Enugu","Aba","Jos","Ilorin","Owerri","Uyo","Asaba"]})}A();function $(n){n.querySelector("#phone").addEventListener("input",function(e){let a=e.target.value.replace(/\D/g,"");a.startsWith("234")||(a="234"+a),a=a.substring(0,12);let t="+234";a.length>3&&(t+="-"+a.substring(3,5)),a.length>5&&(t+="-"+a.substring(5,8)),a.length>8&&(t+="-"+a.substring(8,12)),e.target.value=t})}const h=(n,e=!1)=>{const a=document.querySelector(".form-error.global-message");a.textContent=n,a.style.color=e?"rgb(155, 2, 2)":"rgb(2, 155, 2)"};window.addEventListener("DOMContentLoaded",async()=>{new L,new C,new w,P(),new k,new q,new x,document.querySelectorAll("[data-form-validate]").forEach(e=>{const a=e.querySelector(".nice-select-dropdown"),t=e.querySelector("button");a.setAttribute("data-lenis-prevent",""),e&&($(e),R(e),e.addEventListener("submit",async r=>{var i;if(r.preventDefault(),!N())return;const s=document.querySelector('input[name="csrftoken"]').value;t.style.pointerEvents="none",t.style.opacity="0.6";try{const l=new FormData(e),u=Object.fromEntries(l.entries()),d=await fetch("/api/contact",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-Token":s},body:JSON.stringify(u)}),o=await d.json();d.status!==200?o.errors?h((i=o.errors[0])==null?void 0:i.message,!0):h(o.message||"Failed to submit the form. Please try again later.",!0):h("Your message has been sent successfully!, We will get back to you soon.",!1)}catch(l){console.error("Error submitting form:",l),h("An error occurred while submitting the form. Please try again later.",!0)}finally{t.style.pointerEvents="",t.style.opacity="",V()}}))})});
